<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oyunlar</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f8f9fa;
      text-align: center;
    }
    h2 {
      margin-bottom: 20px;
    }
    .game-row {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
    }
    .team-input {
      width: 150px;
      padding: 10px;
      margin: 0 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .gray-input {
      background-color: #e0e0e0;
    }
    .deadline {
      margin-top: 30px;
    }
    .deadline label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }
    .submit-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2>OYUNLAR</h2>
  <form id="gamesForm">
    <div id="gamesContainer">
      <!-- 11 rows of 2 input fields -->
    </div>

    <div class="deadline">
      <label for="deadline-date">Tarix seçin:</label>
      <input type="date" id="deadline-date" required>
      <label for="deadline-time">Saat seçin:</label>
      <input type="time" id="deadline-time" required>
    </div>

    <button type="submit" class="submit-btn">GÖNDƏR</button>
  </form>

  
<script>
  const now = new Date();
  const currentTime = now.getTime();
  const timezoneOffset = -4 * 60; // GMT+4
  const monday = new Date(now);
  monday.setUTCHours(9, 0, 0, 0); // 13:00 GMT+4 == 09:00 UTC
  monday.setUTCDate(monday.getUTCDate() - monday.getUTCDay() + 1);
  const resetTime = monday.getTime();
  const lastReset = parseInt(localStorage.getItem("lastResetTime") || "0");

  if (currentTime >= resetTime && currentTime > lastReset) {
    localStorage.removeItem("userPredictions");
    localStorage.removeItem("officialResults");
    localStorage.setItem("lastResetTime", currentTime.toString());
  }
</script>

<script>
    const gamesContainer = document.getElementById('gamesContainer');

    for (let i = 0; i < 11; i++) {
      const row = document.createElement('div');
      row.className = 'game-row';

      const input1 = document.createElement('input');
      const input2 = document.createElement('input');
      input1.type = input2.type = 'text';
      input1.className = input2.className = 'team-input';

      if (i === 10) {
        input1.classList.add('gray-input');
        input2.classList.add('gray-input');
      }

      row.appendChild(input1);
      row.appendChild(input2);
      gamesContainer.appendChild(row);
    }

    document.getElementById('gamesForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const date = document.getElementById('deadline-date').value;
      const time = document.getElementById('deadline-time').value;

      if (!date || !time) {
        alert("Zəhmət olmasa tarix və saat seçin.");
        return;
      }

      const selectedDate = new Date(date + 'T' + time);
      const now = new Date();
      const diffHours = (selectedDate - now) / (1000 * 60 * 60);

      const inputs = document.querySelectorAll('.team-input:not(.gray-input)');
      for (let input of inputs) {
        if (!input.value.trim()) {
          alert("Bütün xanalar doldurulmalıdır.");
          return;
        }
      }

      if (diffHours < 48) {
        alert("Deadline ən azı 48 saat sonra olmalıdır.");
      } else {
        // Save to localStorage
        const matchPairs = [];
        for (let i = 0; i < inputs.length; i += 2) {
          const team1 = inputs[i].value.trim();
          const team2 = inputs[i + 1].value.trim();
          matchPairs.push(`${team1} - ${team2}`);
        }
        localStorage.setItem('matches', JSON.stringify(matchPairs));
        alert("Uğurla göndərildi və oyunlar yadda saxlanıldı!");

document.querySelectorAll("input, select, button").forEach(el => {
  if (el.type !== "submit") el.disabled = true;
});
localStorage.setItem("gamesLocked", "true");

      }
    });
  </script>
</body>
</html>
